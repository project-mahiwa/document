# FFIの方針

## 型

### C/C++ to wasm3

- 原則PlatformIOで読んでいるライブラリ関数の型に従う
- Cでのdoubleはf64で表現.
- 実装がマクロなどで最適化されており型がない場合はintを中心とした適切な型を採用
- Arduino側の定義でintになっているところは32bitでマイコンが動くことを想定してi32とする

### Languages to WebAssembly

- WebAssemblyにはi32,i64,f32,f64しかないのでuint8などを使うことでメモリ削減などに繋がらないが、将来の型対応やオーバーフローをコンパイラのレベルで防ぐことを目的として、mahiwa-backend側に合わせる。

## 定数

- WebAssemblyを経由するタイミングで数値になる上、Arduinoの定数系も実際は数値なので、最初から数値だと無駄がない
- ドキュメントに明記する

## 関数名

- ライブラリとするプログラミング言語側を優先する
